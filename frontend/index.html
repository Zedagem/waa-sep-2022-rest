<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WAA Day2</title>
    <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
<style>
    .col{
        border: 1px solid black;
        height: 500px;
    }
</style>
</head>
<body>
    <header class="text-center">
        <h1>WAA DAY2 Assignment</h1>
        <h3>For Student</h3>
    </header>
  
   <div class="container">
    <!-- Content here -->
    <div class="row">
        <div class="col">
            <div class="mt-2">
                <input type="text" name="id" placeholder="Search By ID">
                <button onclick="search()">Search</button>
            </div>
            <div class="mt-3">
                <input type="text" name="firstName" placeholder="First Name">
                <input type="text" name="lastName" placeholder="Last Name">
                <input type="email" name="email" placeholder="Email">
                <div class="mt-1">
                    <input type="number" name="gpa" placeholder="GPA">
                    <button onclick="create()" >Create Student</button>
                </div>
                
            </div>
        
        </div>
        <div class="col text-center" id="display" >
           
        </div>
        </div>
    
  </div>


  <script>
    fetch('http://localhost:8080/student/',{
        method:'GET',
        headers:{'Content-Type': 'application/json'},
        
    }).then(respose => respose.json())
    .then(data => {
        // let table = document.createElement("table")
        // table.setAttribute('class','table')
        document.getElementById('display').append(JSON.stringify(data))
    })
    .catch(err => console.log(err))

function search(){
    let id = document.querySelector('[name=id]').value;
   
    fetch('http://localhost:8080/student/'+id,{
        method:'GET',
        headers:{'Content-Type': 'application/json'},
        
    }).then(respose => respose.json())
    .then(data =>{
        document.getElementById('display').innerHTML="";
        document.getElementById('display').append(JSON.stringify(data));
    })
    .catch(err=> console.log(err))
}

    function create(){
        let data = {};
        data['firstName'] = document.querySelector('[name=firstName]').value;
        data['lastName'] = document.querySelector('[name=lastName]').value;
        data['email'] = document.querySelector('[name=email]').value;
        data['gpa'] = document.querySelector('[name=gpa]').value;
        fetch('http://localhost:8080/student/', {
        method: 'POST', 
        headers: {
             'Content-Type': 'application/json',
        },
      body: JSON.stringify(data),
   }).then(response => {
    if(response.status == 201){
        document.getElementById('display').innerHTML="";
        let h3 = document.createElement('h3');
        h3.innerText = "Created Succesfully"
        document.getElementById('display').append(h3);
    }
    else{
        document.getElementById('display').innerHTML="";
        let h3 = document.createElement('h3');
        h3.innerText = "Error While Creating"
        document.getElementById('display').append(h3);
    }
   })
     .catch(err => console.log(err))

    }

  


  </script>
</body>
</html>